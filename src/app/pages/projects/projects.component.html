<div class="projects-page">
  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <h1>Proyectos de la Comunidad</h1>
      <p class="hero-subtitle">Soluciones innovadoras desarrolladas por la comunidad mexicana</p>
    </div>
  </section>

  <!-- Featured Projects -->
  <section class="featured-projects">
    <div class="container">
      <h2>Proyectos Destacados</h2>
      <div class="featured-grid">
        <div class="featured-card">
          <div class="project-image">
            <div class="image-placeholder">ðŸ“¡</div>
          </div>
          <div class="project-content">
            <h3>Red Mesh CDMX</h3>
            <p class="project-category">Infraestructura</p>
            <p class="project-description">
              Red Mesh CDMX es la red Meshtastic mÃ¡s activa de MÃ©xico, con alrededor de <strong>11 nodos</strong> que reportan ubicaciÃ³n en tiempo real mediante MQTT en la Ciudad de MÃ©xico. Permite comunicaciÃ³n descentralizada y resiliente en la capital, facilitando pruebas, colaboraciÃ³n y cobertura en distintas zonas urbanas.
            </p>
            <div class="project-stats">
              <span>6 nodos en CDMX</span>
              <span>19 nodos nacionales</span>
              <span>Activo</span>
            </div>
            <div style="width: 100%; margin: 1.5rem 0;">
              <iframe 
                src="https://meshmap.net/" 
                width="100%" 
                height="400" 
                style="border:0; border-radius: 12px;" 
                allowfullscreen="" 
                loading="lazy">
              </iframe>
            </div>
            <div class="project-links">
              <a href="#" class="btn btn-primary">Ver Proyecto</a>
              <a href="#" class="btn btn-secondary">DocumentaciÃ³n</a>
            </div>
          </div>
        </div>
        <div class="featured-card">
          <div class="project-image">
            <div class="image-placeholder">ðŸŒ¾</div>
          </div>
          <div class="project-content">
            <h3>AgroMesh</h3>
            <p class="project-category">Agricultura</p>
            <p class="project-description">
              Sistema de monitoreo agrÃ­cola usando redes mesh para sensores de humedad, 
              temperatura y control de riego en zonas rurales sin conectividad.
            </p>
            <div class="project-stats">
              <span>20 sensores</span>
              <span>3 granjas</span>
              <span>En desarrollo</span>
            </div>
            <div class="project-links">
              <a href="#" class="btn btn-primary">Ver Proyecto</a>
              <a href="#" class="btn btn-secondary">DocumentaciÃ³n</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- All Projects -->
  <section class="all-projects">
    <div class="container">
      <h2>Todos los Proyectos</h2>
      <div class="filters">
        <button class="filter-btn active" data-filter="all">Todos</button>
        <button class="filter-btn" data-filter="infrastructure">Infraestructura</button>
        <button class="filter-btn" data-filter="agriculture">Agricultura</button>
        <button class="filter-btn" data-filter="emergency">Emergencias</button>
        <button class="filter-btn" data-filter="education">EducaciÃ³n</button>
      </div>
      <div class="projects-grid">
        <div class="project-card" data-category="infrastructure">
          <div class="project-header">
            <h3>Monterrey Mesh</h3>
            <span class="status active">Activo</span>
          </div>
          <p>Red mesh en Monterrey para aplicaciones industriales y monitoreo urbano.</p>
          <div class="project-meta">
            <span>30 nodos</span>
            <span>Monterrey</span>
          </div>
          <a href="#" class="project-link">Ver detalles â†’</a>
        </div>
        <div class="project-card" data-category="emergency">
          <div class="project-header">
            <h3>AlertMex</h3>
            <span class="status development">En desarrollo</span>
          </div>
          <p>Sistema de alertas de emergencia usando redes mesh para zonas sin cobertura.</p>
          <div class="project-meta">
            <span>10 nodos</span>
            <span>CDMX</span>
          </div>
          <a href="#" class="project-link">Ver detalles â†’</a>
        </div>
        <div class="project-card" data-category="education">
          <div class="project-header">
            <h3>EduMesh</h3>
            <span class="status planning">PlanificaciÃ³n</span>
          </div>
          <p>Plataforma educativa para enseÃ±ar redes mesh en escuelas rurales.</p>
          <div class="project-meta">
            <span>5 escuelas</span>
            <span>Oaxaca</span>
          </div>
          <a href="#" class="project-link">Ver detalles â†’</a>
        </div>
        <div class="project-card" data-category="agriculture">
          <div class="project-header">
            <h3>VineMesh</h3>
            <span class="status active">Activo</span>
          </div>
          <p>Monitoreo de viÃ±edos en Baja California usando sensores mesh.</p>
          <div class="project-meta">
            <span>15 sensores</span>
            <span>Baja California</span>
          </div>
          <a href="#" class="project-link">Ver detalles â†’</a>
        </div>
        <div class="project-card" data-category="infrastructure">
          <div class="project-header">
            <h3>Guadalajara Smart City</h3>
            <span class="status development">En desarrollo</span>
          </div>
          <p>Iniciativa de ciudad inteligente usando redes mesh para IoT urbano.</p>
          <div class="project-meta">
            <span>100+ sensores</span>
            <span>Guadalajara</span>
          </div>
          <a href="#" class="project-link">Ver detalles â†’</a>
        </div>
        <div class="project-card" data-category="emergency">
          <div class="project-header">
            <h3>RescueMesh</h3>
            <span class="status planning">PlanificaciÃ³n</span>
          </div>
          <p>Sistema de comunicaciÃ³n para equipos de rescate en zonas de desastre.</p>
          <div class="project-meta">
            <span>20 dispositivos</span>
            <span>Nacional</span>
          </div>
          <a href="#" class="project-link">Ver detalles â†’</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Submission Form Section -->
  <section id="submit-project" class="submit-section">
    <div class="container">
      <div class="submit-wrapper glass-card">
        <div class="submit-info">
          <h2>Â¿Tienes un Proyecto?</h2>
          <p>
            Â¿EstÃ¡s desarrollando algo interesante con Meshtastic? Â¡Comparte tu proyecto 
            con la comunidad y encuentra colaboradores!
          </p>
          <ul class="benefits-list">
            <li><i class="fas fa-check-circle"></i> Visibilidad nacional</li>
            <li><i class="fas fa-check-circle"></i> Conecta con expertos</li>
            <li><i class="fas fa-check-circle"></i> Impulsa la red en MÃ©xico</li>
          </ul>
        </div>

        <div class="submit-form-container">
          <form [formGroup]="projectForm" (ngSubmit)="onSubmit()" class="project-form" *ngIf="!isSubmitted">
            <div class="form-grid">
              <div class="form-group">
                <label for="projectName">Nombre del Proyecto</label>
                <input type="text" id="projectName" formControlName="projectName" placeholder="Ej. Red Mesh Guadalajara">
                <span class="error" *ngIf="projectForm.get('projectName')?.touched && projectForm.get('projectName')?.errors?.['required']">El nombre es requerido</span>
              </div>

              <div class="form-group">
                <label for="category">CategorÃ­a</label>
                <select id="category" formControlName="category">
                  <option value="">Selecciona una categorÃ­a</option>
                  <option value="infrastructure">Infraestructura</option>
                  <option value="agriculture">Agricultura</option>
                  <option value="emergency">Emergencias</option>
                  <option value="education">EducaciÃ³n</option>
                  <option value="other">Otro</option>
                </select>
                <span class="error" *ngIf="projectForm.get('category')?.touched && projectForm.get('category')?.errors?.['required']">La categorÃ­a es requerida</span>
              </div>

              <div class="form-group">
                <label for="state">Estado</label>
                <select id="state" formControlName="state">
                  <option value="">Selecciona un estado</option>
                  <option *ngFor="let state of states" [value]="state">{{ state }}</option>
                </select>
                <span class="error" *ngIf="projectForm.get('state')?.touched && projectForm.get('state')?.errors?.['required']">El estado es requerido</span>
              </div>

              <div class="form-group">
                <label for="city">Ciudad / Municipio</label>
                <input type="text" id="city" formControlName="city" placeholder="Ej. Zapopan">
                <span class="error" *ngIf="projectForm.get('city')?.touched && projectForm.get('city')?.errors?.['required']">La ciudad es requerida</span>
              </div>

              <div class="form-group">
                <label for="hardware">Hardware (Opcional)</label>
                <input type="text" id="hardware" formControlName="hardware" placeholder="Ej. Heltec V3, T-Beam">
              </div>

              <div class="form-group">
                <label for="contactEmail">Email de Contacto</label>
                <input type="email" id="contactEmail" formControlName="contactEmail" placeholder="tu@email.com">
                <span class="error" *ngIf="projectForm.get('contactEmail')?.touched && projectForm.get('contactEmail')?.errors?.['required']">El email es requerido</span>
                <span class="error" *ngIf="projectForm.get('contactEmail')?.touched && projectForm.get('contactEmail')?.errors?.['email']">Email invÃ¡lido</span>
              </div>
            </div>

            <div class="form-group full-width">
              <label for="description">DescripciÃ³n del Proyecto</label>
              <textarea id="description" formControlName="description" rows="4" placeholder="CuÃ©ntanos sobre tu proyecto, objetivos y tecnologÃ­a utilizada..."></textarea>
              <span class="error" *ngIf="projectForm.get('description')?.touched && projectForm.get('description')?.errors?.['required']">La descripciÃ³n es requerida</span>
              <span class="error" *ngIf="projectForm.get('description')?.touched && projectForm.get('description')?.errors?.['minlength']">MÃ­nimo 20 caracteres</span>
            </div>

            <div class="form-group full-width">
              <label for="projectLink">Link del Proyecto (Opcional)</label>
              <input type="url" id="projectLink" formControlName="projectLink" placeholder="https://github.com/tu-proyecto">
            </div>

            <button type="submit" class="btn btn-primary submit-btn" [disabled]="projectForm.invalid || isSending">
              <i class="fas" [class.fa-paper-plane]="!isSending" [class.fa-spinner]="isSending" [class.fa-spin]="isSending"></i>
              {{ isSending ? 'Enviando...' : 'Enviar Proyecto' }}
            </button>
          </form>

          <!-- Success Message -->
          <div class="success-message" *ngIf="isSubmitted">
            <div class="success-icon">âœ…</div>
            <h3>Â¡Proyecto Recibido!</h3>
            <p>Gracias por contribuir a la comunidad. Revisaremos tu proyecto y lo publicaremos pronto.</p>
            <button class="btn btn-secondary" (click)="isSubmitted = false">Enviar otro</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Project Stats -->
  <section class="project-stats">
    <div class="container">
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-number">25+</div>
          <div class="stat-label">Proyectos Activos</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">150+</div>
          <div class="stat-label">Nodos Desplegados</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">8</div>
          <div class="stat-label">Estados</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">50+</div>
          <div class="stat-label">Contribuidores</div>
        </div>
      </div>
    </div>
  </section>
</div>
